var OtpVerification=function(){var e,t,i,n,s,a,r,c,o,l,u,d,v,p,m,L;function f(){return l.innerText.split("-")[1]}function b(){p=L;let t=document.querySelector(".js-resend-counter");if(0!==v){d.changeMobileNumber=f(),d.initiateOtpVerification(),t&&(t.innerHTML=p),!e.classList.contains("resend-button--inactive")&&i.classList.contains("counter-wrapper--inactive")&&(i.classList.remove("counter-wrapper--inactive"),e.classList.add("resend-button--inactive"));let n=setInterval((function(){if(--p<=0)return clearInterval(n),void(e.classList.contains("resend-button--inactive")&&!i.classList.contains("counter-wrapper--inactive")&&(i.classList.add("counter-wrapper--inactive"),e.classList.remove("resend-button--inactive")));t&&(t.innerHTML=p)}),1e3);v--}0===v&&(e.setAttribute("disabled",""),e.classList.add("resend-button--disabled"))}function y(){var e=document.querySelector(".js-otp-field"),t=e.parentElement;e&&(e.oninput=function(){if(e.value.length==d.otpLength){var i=f();(function(e,t){return d.changeMobileNumber=t,d.verifyOtp(e.value).then(e=>e.ResponseCode==verificationStatus.ok)})(e,i).then(n=>(function(e,t,i,n){if(e&&!a.classList.contains("tick-container--active")){a.classList.add("tick-container--active"),s.classList.add("error-text--hide"),t.classList.remove("invalid"),document.getElementById("contactDetaileValidatorPopUp").classList.remove("otp-verification--active"),leadVM.mobileNo(n),leadVM.pushESLeadCommon()}else s.classList.remove("error-text--hide"),t.classList.add("invalid"),null===i.value||t.classList.contains("not-empty")?t.classList.remove("not-empty"):t.classList.add("not-empty")})(n,t,e,i))}},e.addEventListener("focusout",(function(){0!==e.value.length?t.classList.add("not-empty"):t.classList.remove("not-empty")})))}return{registerEvents:function(){if(r=document.querySelector(".js-verification-wrapper"),t=document.querySelector(".js-submit-lead"),u=document.querySelector(".js-toll-free"),verifyOtpbtn=document.querySelector(".js-call-verify"),r&&(e=r.querySelector(".js-resend-otp"),i=r.querySelector(".js-counter-wrapper"),n=r.querySelector(".js-mobile-input-field"),s=r.querySelector(".js-otp-error-text"),c=r.querySelector(".js-confirm-button"),o=r.querySelector(".js-change-button"),l=r.querySelector(".js-input-text"),a=r.querySelector(".js-tick-icon")),t){t.addEventListener("click",(function(){var e,t=document.querySelector(".js-mobile-number").value;e=t,l.innerText="+91-"+e}));document.querySelector(".js-mobile-number").value;o.addEventListener("click",(function(){n.parentElement.classList.add("not-empty"),r.classList.contains("input-field-wrapper--active")||(r.classList.add("input-field-wrapper--active"),n.value=f())})),function(t){let i=r.querySelector(".otp-update-msg");var s=i.parentElement,a=s.querySelector(".js-mobile-number-error");n.addEventListener("keyup",(function(){validateMobileNo(n.value,this)?(s.classList.remove("invalid"),a.classList.add("hide"),n.value!==f()&&i.classList.add("otp-update-msg--active")):i.classList.contains("otp-update-msg--active")&&(a.classList.remove("hide"),i.classList.remove("otp-update-msg--active"),s.classList.add("invalid"))})),c.addEventListener("click",(function(){validateMobileNo(n.value,this)?(r.classList.contains("input-field-wrapper--active")&&r.classList.remove("input-field-wrapper--active"),i.classList.contains("otp-update-msg--active")&&i.classList.remove("otp-update-msg--active"),n.value!==f()&&(v=m,e.removeAttribute("disabled"),e.classList.remove("resend-button--disabled"),l.innerText="+91-"+n.value,d.changeMobileNumber=f(),d.initiateMissedCallVerification().then(e=>{OtpVerification.bindTollFreeNumber(e.tollFreeNumber)}),b()),l.innerText="+91-"+n.value,document.getElementById("getOtp").value=""):(a.innerHTML=this.msg,a.classList.remove("hide"))})),n.addEventListener("focusout",(function(){0!==n.value.length?n.parentElement.classList.add("not-empty"):n.parentElement.classList.remove("not-empty")}))}(),y(),e.classList.add("resend-button--active"),e.classList.remove("resend-button--inactive"),i.classList.add("counter-wrapper--inactive"),i.classList.remove("counter-wrapper--active"),verifyOtpbtn.addEventListener("click",(function(){var e,t=f();(e=t,d.changeMobileNumber=e,d.checkIfUserVerified().then(e=>e.isMobileVerified)).then(e=>{e&&(a.classList.add("tick-container--active"),document.getElementById("contactDetaileValidatorPopUp").classList.remove("otp-verification--active"),leadVM.mobileNo(t),leadVM.pushESLeadCommon())})}));var p=r.querySelector(".otp-update-msg").parentElement.querySelector(".js-mobile-number-error");n.addEventListener("focus",(function(){p.classList.add("hide")}))}e&&e.addEventListener("click",(function(){v&&b()}))},bindTollFreeNumber:function(e){u.setAttribute("href",`tel: ${e}`),u.querySelector(".js-toll-free-text").innerText=e},setDefaultParameter:function(e,t,i){d=e,v=m=t||5,p=L=i||15}}}();OtpVerification.registerEvents();