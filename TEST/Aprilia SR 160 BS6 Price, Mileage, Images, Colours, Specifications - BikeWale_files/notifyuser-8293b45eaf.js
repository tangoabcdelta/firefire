var FormUtility=function(){function t(t,e){t.siblings(".alertme-field__error-message").show().text(e),t.closest(".form-field__content").addClass("field--invalid")}function e(t){t.closest(".form-field__content").removeClass("field--invalid"),t.siblings(".alertme-field__error-message").text("")}return{registerEvents:function(){document.getElementById("notifyNumberField").addEventListener("focus",(function(){e($("#"+this.id))}))},validateMobileNo:function(e){var a=!0,i=e.val();return i?/^[6-9][0-9]{9}$/.test(i)||(t(e,"Invalid Mobile Number"),a=!1):(t(e,"Please enter mobile number"),a=!1),a},resetInputField:function(t){e(t)}}}();function BindNotifyMeButtonClick(){$(".js-alertme__notify-btn").on("click",(function(){$(".js-alertme-details__model").text($(this).attr("data-bikeName")),$(".form-alertme__submit-btn").attr("data-bikename",$(this).attr("data-bikename")),$(".form-alertme__submit-btn").attr("data-makeid",$(this).attr("data-makeid")),$(".form-alertme__submit-btn").attr("data-modelid",$(this).attr("data-modelid")),$(".form-alertme__submit-btn").attr("data-lab",$(this).attr("data-lab")),$(".form-alertme__submit-btn").attr("data-cat",$(this).attr("data-cat")),$(".form-alertme__submit-btn").attr("data-bhrigucat",$(this).attr("data-bhrigucat")),void 0!==$(this).attr("data-customact")&&""!=$(this).attr("data-customact")?$(".form-alertme__submit-btn").attr("data-act",$(this).attr("data-customact")):$(".form-alertme__submit-btn").attr("data-act","Notify_Me_Phone_Submitted")}))}var AlertMePopup=function(){var t,e;function a(){new Popup(".js-alertme__notify-btn",{onPopupOpen:function(){var e;FormUtility.resetInputField(t),t.val(""),t.focus(),(e=n())&&t.attr("value",e[2])},onCloseClick:function(){i()}})}function i(){e.classList.remove("popup-active"),HandleBodyScroll.unlockScroll(),$(".notify-popup__alert-screen").removeClass("hide"),$(".notify-popup__thank-you-screen").addClass("hide")}function n(){var t=document.cookie.match("(^|;) ?_PQUser=([^;]*)(;|$)");return t?t[2].split("&"):null}return{registerEvents:function(){t=$("#notifyNumberField"),e=document.getElementById("alert-me_notifyPopup"),a(),$(".okbtn").on("click",(function(){i()}))},setUserCookie:function(){if(""!==t.val()){var e="undefined",a="undefined",i=n;i&&(e=i[0],a=i[1]);var o=e+"&"+a+"&"+t.val();SetCookie("_PQUser",o)}},showThankYouScreen:function(){$(".notify-popup__alert-screen").addClass("hide"),$(".notify-popup__thank-you-screen").removeClass("hide")}}}();function executeNotification(t){var e=!1,a={mobile:$("#notifyNumberField").val(),makeId:t[0].dataset.makeid,modelId:t[0].dataset.modelid,bikeName:t[0].dataset.bikename};$.ajax({type:"POST",url:"/api/notifyuser/",contentType:"application/json",data:ko.toJSON(a),success:function(t){t&&(e=t)},complete:function(i){var n=gaObj.name,o=`modelId=${a.modelId}|Success=${e}|mobilenumber=${a.mobile}`;cwTracking.trackCustomData(n,"SubscribedForAlert",o);var r=gaObj.name,l=t[0].dataset.lab;if("undefined"!=t[0].dataset.act&&""!=t[0].dataset.act)var s=t[0].dataset.act;else s="Notify_Me_Phone_Submitted";triggerGA(r,s,l),AlertMePopup.showThankYouScreen()}})}docReady((function(){AlertMePopup.registerEvents(),FormUtility.registerEvents(),$("#notifySubmitBtn").on("click",(function(){FormUtility.validateMobileNo($("#notifyNumberField"))&&(executeNotification($("#notifySubmitBtn")),AlertMePopup.setUserCookie())})),BindNotifyMeButtonClick()}));